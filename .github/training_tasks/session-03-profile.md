# セッション3: プロフィール管理と住所取得

## 目的
- `users` コレクションのデータモデルとプロフィール編集機能を完成させ、ユーザー情報を Firestore / Storage と連携させる。
- 郵便番号から住所を取得する REST API を `http` パッケージで実装し、入力補助を提供する。

## 作業項目
- [ ] `freezed` × `json_serializable` で `User` モデル、コンバーター、データソース層を定義する。
- [ ] プロフィール表示・編集ページを実装し、画像アップロードを Cloud Storage と連携する。
- [ ] 郵便番号検索 API クライアントを実装し、Riverpod で状態管理する。
- [ ] 県・市町村の入力支援とバリデーション（郵便番号形式、必須項目）を実装する。
- [ ] プロフィール更新時に `updatedAt` を適切に設定する Firestore アクセスを実装する。

## 実装時に意識できているといいこと
- `Timestamp` 変換用の `JsonConverter` を作成し、日付フィールドの整合性をどの層で担保するか考えてみよう。
- 郵便番号 API のレスポンス仕様を把握し、エラー時にユーザーへどうフォールバックさせるか UX 観点で検討してみよう。

## 完了条件
- プロフィール更新が Firestore に反映され、画面上にも即時反映される。
- 画像をアップロードした場合に Cloud Storage の URL が保存される。
- 郵便番号入力から住所を取得でき、エラーハンドリングが行われる。

## 備考
- Storage と Firestore の利用権限を考慮し、セキュリティルールを更新する。
- 住所 API のレスポンス形式が変わる可能性を想定し、失敗時のフォールバック（手入力継続）を確保する。
